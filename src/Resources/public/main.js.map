{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../node_modules/image-focus/dist/image-focus.es5.js","webpack:///./index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","e","arguments","length","forEach","keys","CONTAINER_STYLES","position","overflow","ABSOLUTE_STYLES","top","right","bottom","left","IMAGE_STYLES","display","maxWidth","touchAction","RETINA_STYLES","cursor","transform","DEFAULT_OPTIONS","onChange","retina","FocusPicker","this","startDragging","preventDefault","isDragging","MouseEvent","updateCoordinates","clientX","clientY","touches","handleMove","document","elementFromPoint","pageX","pageY","img","stopDragging","updateRetinaPositionFromFocus","updateRetinaPosition","calculateOffsetFromFocus","style","offsetY","offsetX","options","container","parentElement","createElement","src","draggable","appendChild","startListening","focus","x","parseFloat","getAttribute","y","setFocus","addEventListener","passive","stopListening","removeEventListener","setAttribute","toString","getBoundingClientRect","width","height","a","IMG_STYLES","minHeight","minWidth","RESIZE_LISTENER_OBJECT_STYLES","border","opacity","zIndex","pointerEvents","DEFAULT_OPTIONS$1","debounceTime","updateOnWindowResize","updateOnContainerResize","containerPosition","imageNode","listening","applyShift","naturalWidth","naturalHeight","h","u","maxHeight","calcShift","__focused_image_instance__","debounceApplyShift","clearTimeout","setTimeout","apply","debounce","window","contentDocument","defaultView","type","tabIndex","data","resizeListenerObject","removeChild","Math","floor","g","querySelectorAll","picker","area","querySelector"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,iDClFrD,SAAS,EAAOb,GAAG,IAAI,IAAIlB,EAAE,GAAGgC,EAAE,EAAEA,EAAEC,UAAUC,OAAOF,IAAIhC,EAAEgC,EAAE,GAAGC,UAAUD,GAAG,OAAOhC,EAAEmC,SAAQ,SAASnC,GAAG,OAAOU,OAAO0B,KAAKpC,GAAGmC,SAAQ,SAASH,GAAG,OAAOd,EAAEc,GAAGhC,EAAEgC,SAAOd,E,OAAiL,IAAsBmB,EAAiB,CAACC,SAAS,WAAWC,SAAS,UAAUC,EAAgB,CAACF,SAAS,WAAWG,IAAI,IAAIC,MAAM,IAAIC,OAAO,IAAIC,KAAK,KAAqbC,EAAa,CAACC,QAAQ,QAAQC,SAAS,OAAOC,YAAY,QAAQC,EAAc,CAACX,SAAS,WAAWY,OAAO,OAAOC,UAAU,yBAAyBC,EAAgB,CAACC,SAAzuB,aAAuvBC,OAA9lB,0aAA6mBC,EAAY,WAAW,SAASrC,EAAEA,EAAElB,QAAG,IAASA,IAAIA,EAAE,IAAI,IAAIgC,EAAEwB,KAAKA,KAAKC,cAAc,SAASvC,GAAGA,EAAEwC,iBAAiB1B,EAAE2B,YAAW,EAAGzC,aAAa0C,WAAW5B,EAAE6B,kBAAkB3C,EAAE4C,QAAQ5C,EAAE6C,SAAS/B,EAAE6B,kBAAkB3C,EAAE8C,QAAQ,GAAGF,QAAQ5C,EAAE8C,QAAQ,GAAGD,UAAUP,KAAKS,WAAW,SAAS/C,GAAG,GAAGA,EAAEwC,iBAAiBxC,aAAa0C,WAAW5B,EAAE6B,kBAAkB3C,EAAE4C,QAAQ5C,EAAE6C,aAAa,CAAC,IAAI/D,EAAEkB,EAAE8C,QAAQ,GAAGvC,EAAEyC,SAASC,iBAAiBnE,EAAEoE,MAAMpE,EAAEqE,OAAO5C,IAAIO,EAAEsB,QAAQ7B,IAAIO,EAAEsC,IAAItC,EAAEuC,eAAevC,EAAE6B,kBAAkB7D,EAAE8D,QAAQ9D,EAAE+D,WAAWP,KAAKe,aAAa,WAAWvC,EAAE2B,YAAW,GAAIH,KAAKgB,8BAA8B,WAAWxC,EAAEyC,qBAAqBzC,EAAE0C,6BAA6BlB,KAAKiB,qBAAqB,SAASvD,GAAGc,EAAEsB,OAAOqB,MAAMlC,IAAIvB,EAAE0D,QAAQ,KAAK5C,EAAEsB,OAAOqB,MAAM/B,KAAK1B,EAAE2D,QAAQ,MAAMrB,KAAKsB,QAAQ,EAAO,GAAG1B,EAAgBpD,GAAGwD,KAAKc,IAAIpD,EAAEsC,KAAKuB,UAAU7D,EAAE8D,cAAcxB,KAAKF,OAAOY,SAASe,cAAc,OAAOzB,KAAKF,OAAO4B,IAAI1B,KAAKsB,QAAQxB,OAAOE,KAAKF,OAAO6B,WAAU,EAAG3B,KAAKuB,UAAUK,YAAY5B,KAAKF,QAAQE,KAAKc,IAAIa,WAAU,EAAG3B,KAAK6B,iBAAiB,EAAO7B,KAAKc,IAAIK,MAAM9B,GAAc,EAAOW,KAAKF,OAAOqB,MAAM1B,GAAe,EAAOO,KAAKuB,UAAUJ,MAAMtC,GAAkBmB,KAAK8B,MAAM9B,KAAKsB,QAAQQ,MAAM9B,KAAKsB,QAAQQ,MAAM,CAACC,EAAEC,WAAWhC,KAAKc,IAAImB,aAAa,kBAAkB,EAAEC,EAAEF,WAAWhC,KAAKc,IAAImB,aAAa,kBAAkB,GAAGjC,KAAKmC,SAASnC,KAAK8B,OAAO,OAAOpE,EAAEU,UAAUyD,eAAe,WAAW7B,KAAKuB,UAAUa,iBAAiB,YAAYpC,KAAKC,eAAeD,KAAKuB,UAAUa,iBAAiB,YAAYpC,KAAKS,YAAYT,KAAKuB,UAAUa,iBAAiB,UAAUpC,KAAKe,cAAcf,KAAKuB,UAAUa,iBAAiB,aAAapC,KAAKe,cAAcf,KAAKuB,UAAUa,iBAAiB,WAAWpC,KAAKe,cAAcf,KAAKuB,UAAUa,iBAAiB,aAAapC,KAAKC,cAAc,CAACoC,SAAQ,IAAKrC,KAAKuB,UAAUa,iBAAiB,YAAYpC,KAAKS,WAAW,CAAC4B,SAAQ,IAAKrC,KAAKc,IAAIsB,iBAAiB,OAAOpC,KAAKgB,gCAAgCtD,EAAEU,UAAUkE,cAAc,WAAWtC,KAAKuB,UAAUgB,oBAAoB,YAAYvC,KAAKC,eAAeD,KAAKuB,UAAUgB,oBAAoB,YAAYvC,KAAKS,YAAYT,KAAKuB,UAAUgB,oBAAoB,UAAUvC,KAAKe,cAAcf,KAAKuB,UAAUgB,oBAAoB,aAAavC,KAAKe,cAAcf,KAAKuB,UAAUgB,oBAAoB,WAAWvC,KAAKe,cAAcf,KAAKuB,UAAUgB,oBAAoB,aAAavC,KAAKC,eAAeD,KAAKuB,UAAUgB,oBAAoB,YAAYvC,KAAKS,YAAYT,KAAKc,IAAIyB,oBAAoB,OAAOvC,KAAKgB,gCAAgCtD,EAAEU,UAAU+D,SAAS,SAASzE,GAAGsC,KAAK8B,MAAMpE,EAAEsC,KAAKc,IAAI0B,aAAa,eAAe9E,EAAEqE,EAAEU,YAAYzC,KAAKc,IAAI0B,aAAa,eAAe9E,EAAEwE,EAAEO,YAAYzC,KAAKgB,gCAAgChB,KAAKsB,QAAQzB,SAASnC,IAAIA,EAAEU,UAAU8C,yBAAyB,WAAW,IAAIxD,EAAEsC,KAAKc,IAAI4B,wBAAwBlG,EAAEkB,EAAEiF,MAAMnE,EAAEd,EAAEkF,OAAO,MAAM,CAACvB,QAAQ7E,GAAGwD,KAAK8B,MAAMC,EAAE,EAAE,IAAIX,QAAQ5C,GAAGwB,KAAK8B,MAAMI,GAAG,EAAE,MAAMxE,EAAEU,UAAUiC,kBAAkB,SAAS3C,EAAElB,GAAG,GAAGwD,KAAKG,WAAW,CAAC,IAAI3B,EAAEwB,KAAKc,IAAI4B,wBAAwBzE,EAAEO,EAAEmE,MAAMpE,EAAEC,EAAEoE,OAAO3F,EAAE,IAAIS,EAAEc,EAAEY,MAAMnB,EAAE,IAAI4E,GAAG,IAAIrG,EAAEgC,EAAES,KAAKV,EAAE,IAAIyB,KAAKmC,SAAS,CAACJ,EAAE9E,EAAEiF,EAAEW,MAAMnF,EAAlhG,GAAuhGoF,EAAW,CAACC,UAAU,OAAOC,SAAS,QAAQC,EAA8B,CAACL,OAAO,OAAOD,MAAM,OAAOO,OAAO,OAAOC,QAAQ,EAAEC,QAAQ,EAAEC,cAAc,QAAQC,EAAkB,CAACC,aAAa,GAAGC,sBAAqB,EAAGC,yBAAwB,EAAGC,kBAAkB,aAAyB,WAAW,SAAShG,EAAEA,EAAElB,QAAG,IAASA,IAAIA,EAAE,IAAI,IAAIgC,EAAEwB,KAAKA,KAAK2D,UAAUjG,EAAEsC,KAAK4D,WAAU,EAAG5D,KAAKmC,SAAS,SAASzE,GAAGc,EAAEsD,MAAMpE,EAAEc,EAAEsC,IAAI0B,aAAa,eAAe9E,EAAEqE,EAAEU,YAAYjE,EAAEsC,IAAI0B,aAAa,eAAe9E,EAAEwE,EAAEO,YAAYjE,EAAEqF,cAAc7D,KAAK6D,WAAW,WAAW,IAAInG,EAAEc,EAAEsC,IAAItE,EAAEkB,EAAEoG,aAAa7F,EAAEP,EAAEqG,cAAcxF,EAAEC,EAAE+C,UAAUmB,wBAAwBzF,EAAEsB,EAAEoE,MAAME,EAAEtE,EAAEqE,OAAOtF,EAAE,IAAI0G,EAAE,IAAI,KAAK/G,EAAE,GAAG4F,EAAE,GAAGrG,EAAE,GAAGyB,EAAE,GAAG,OAAM,EAAG,IAAIpB,EAAEL,EAAES,EAAEgH,EAAEhG,EAAE4E,EAAErE,EAAEsC,IAAIK,MAAM+C,UAAU,KAAK1F,EAAEsC,IAAIK,MAAM5B,SAAS,KAAK/C,EAAES,GAAGgB,EAAE4E,IAAIrE,EAAEsC,IAAIK,MAAMtE,EAAEoH,EAAE,YAAY,YAAY,QAAQpH,EAAEoH,EAAE3G,EAAEkB,EAAE2F,UAAUF,EAAEhH,EAAET,EAAEgC,EAAEsD,MAAMC,GAAG,IAAIlF,EAAEoH,IAAID,EAAExF,EAAE2F,UAAUtH,EAAEgG,EAAE5E,EAAEO,EAAEsD,MAAMI,GAAE,GAAI,KAAK1D,EAAEsC,IAAIK,MAAMlC,IAAI+E,EAAExF,EAAEsC,IAAIK,MAAM/B,KAAK9B,GAAG0C,KAAKsB,QAAQ,EAAOgC,EAAkB9G,GAAGwD,KAAKc,IAAIpD,EAAEsC,KAAKuB,UAAU7D,EAAE8D,cAAcxB,KAAKc,IAAIsD,6BAA6BpE,KAAKc,IAAIsD,2BAA2B9B,gBAAgBtC,KAAKc,IAAIyB,oBAAoB,OAAOvC,KAAK6D,aAAa7D,KAAKc,IAAIsD,2BAA2BpE,KAAKA,KAAKc,IAAIsB,iBAAiB,OAAOpC,KAAK6D,YAAY,EAAO7D,KAAKuB,UAAUJ,MAAMtC,GAAkBmB,KAAKuB,UAAUJ,MAAMrC,SAASkB,KAAKsB,QAAQoC,kBAAkB,EAAO1D,KAAKc,IAAIK,MAAM2B,EAAW9D,GAAiBgB,KAAKqE,mBAAn4K,SAAkB3G,EAAElB,GAAG,IAAIgC,EAAE,OAAO,WAAW,IAAI,IAAIP,EAAE,GAAGM,EAAE,EAAEA,EAAEE,UAAUC,OAAOH,IAAIN,EAAEM,GAAGE,UAAUF,GAAG+F,aAAa9F,GAAGA,EAAE+F,YAAW,WAAW,OAAO7G,EAAE8G,WAAM,EAAOvG,KAAIzB,IAA2uKiI,CAASzE,KAAK6D,WAAW7D,KAAKsB,QAAQiC,cAAcvD,KAAK8B,MAAM9B,KAAKsB,QAAQQ,MAAM9B,KAAKsB,QAAQQ,MAAM,CAACC,EAAEC,WAAWhC,KAAKc,IAAImB,aAAa,kBAAkB,EAAEC,EAAEF,WAAWhC,KAAKc,IAAImB,aAAa,kBAAkB,GAAGjC,KAAK6B,iBAAiB7B,KAAKmC,SAASnC,KAAK8B,OAAcpE,EAAEU,UAAUyD,eAAe,WAAW,IAAInE,EAAEsC,KAAK,IAAIA,KAAK4D,YAAY5D,KAAK4D,WAAU,EAAG5D,KAAKsB,QAAQkC,sBAAsBkB,OAAOtC,iBAAiB,SAASpC,KAAKqE,oBAAoBrE,KAAKsB,QAAQmC,yBAAyB,CAAC,IAAIjH,EAAEkE,SAASe,cAAc,UAAU,EAAOjF,EAAE2E,MAAM8B,EAA8BjE,GAAiBxC,EAAE4F,iBAAiB,QAAO,SAAS5D,GAAG,OAAOhC,EAAEmI,gBAAgBC,YAAYxC,iBAAiB,UAAS,WAAW,OAAO1E,EAAE2G,2BAAyB7H,EAAEqI,KAAK,YAAYrI,EAAEgG,aAAa,cAAc,QAAQhG,EAAEsI,UAAU,EAAE9E,KAAKuB,UAAUK,YAAYpF,GAAGA,EAAEuI,KAAK,cAAc/E,KAAKgF,qBAAqBxI,IAAIkB,EAAEU,UAAUkE,cAAc,WAAWtC,KAAK4D,YAAY5D,KAAK4D,WAAU,EAAGc,OAAOnC,oBAAoB,SAASvC,KAAKqE,oBAAoBrE,KAAKgF,uBAAuBhF,KAAKgF,qBAAqBL,gBAAgBC,YAAYrC,oBAAoB,SAASvC,KAAKqE,oBAAoBrE,KAAKuB,UAAU0D,YAAYjF,KAAKgF,sBAAsBhF,KAAKgF,qBAAqB,QAAQtH,EAAEU,UAAU+F,UAAU,SAASzG,EAAElB,EAAEgC,EAAEP,EAAEM,GAAG,IAAItB,EAAEiI,KAAKC,MAAM3I,EAAE,GAAGqG,GAAG5E,EAAE,GAAG,EAAEX,EAAE4H,KAAKC,MAAM3G,EAAEd,GAAGsG,EAAEkB,KAAKC,MAAMtC,EAAEvF,GAAGiB,IAAIyF,EAAE1G,EAAE0G,GAAG,IAAInH,EAAEmH,EAAE/G,EAAEgH,EAAE3G,EAAE0G,EAAEoB,EAAE5I,EAAES,EAAE,OAAOgH,EAAEmB,IAAIvI,GAAGuI,EAAEnB,GAAGpH,EAAE,IAAIA,EAAE,IAAI,IAAIA,EAAEL,IAAriF,G,KCG/6IkE,SACG2E,iBAAiB,oBACjB1G,QAAQ2G,IACP,IAAIC,EAAOD,EAAOE,cAAc,OAEhC,IAAKD,EACH,OAGF,IAAIxD,EAAIuD,EAAOD,iBAAiB,wBAAwB,GACpDnD,EAAIoD,EAAOD,iBAAiB,wBAAwB,GAExD,IAAItF,EAAYwF,EAAM,CACpB1F,SAAWiC,IACTC,EAAEtE,MAAQqE,EAAMC,EAChBG,EAAEzE,MAAQqE,EAAMI,GAElBJ,MAAO,CACLC,EAAGA,EAAEtE,MACLyE,EAAGA,EAAEzE","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","function assign(t){for(var i=[],e=1;e<arguments.length;e++)i[e-1]=arguments[e];return i.forEach(function(i){return Object.keys(i).forEach(function(e){return t[e]=i[e]})}),t}function debounce(t,i){var e;return function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];clearTimeout(e),e=setTimeout(function(){return t.apply(void 0,n)},i)}}var noop=function(){},CONTAINER_STYLES={position:\"relative\",overflow:\"hidden\"},ABSOLUTE_STYLES={position:\"absolute\",top:\"0\",right:\"0\",bottom:\"0\",left:\"0\"},retina=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDIwIDIwIj4KICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgPGNpcmNsZSBpZD0iYSIgY3g9IjEwIiBjeT0iMTAiIHI9IjEwIiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4zIiAvPgogICAgPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iOSIgc3Ryb2tlPSIjRkZGIiBzdHJva2Utb3BhY2l0eT0iLjgiIHN0cm9rZS13aWR0aD0iMiIvPgogIDwvZz4KPC9zdmc+\",IMAGE_STYLES={display:\"block\",maxWidth:\"100%\",touchAction:\"none\"},RETINA_STYLES={position:\"absolute\",cursor:\"move\",transform:\"translate(-50%, -50%)\"},DEFAULT_OPTIONS={onChange:noop,retina:retina},FocusPicker=function(){function t(t,i){void 0===i&&(i={});var e=this;this.startDragging=function(t){t.preventDefault(),e.isDragging=!0,t instanceof MouseEvent?e.updateCoordinates(t.clientX,t.clientY):e.updateCoordinates(t.touches[0].clientX,t.touches[0].clientY)},this.handleMove=function(t){if(t.preventDefault(),t instanceof MouseEvent)e.updateCoordinates(t.clientX,t.clientY);else{var i=t.touches[0],n=document.elementFromPoint(i.pageX,i.pageY);n!==e.retina&&n!==e.img?e.stopDragging():e.updateCoordinates(i.clientX,i.clientY)}},this.stopDragging=function(){e.isDragging=!1},this.updateRetinaPositionFromFocus=function(){e.updateRetinaPosition(e.calculateOffsetFromFocus())},this.updateRetinaPosition=function(t){e.retina.style.top=t.offsetY+\"px\",e.retina.style.left=t.offsetX+\"px\"},this.options=assign({},DEFAULT_OPTIONS,i),this.img=t,this.container=t.parentElement,this.retina=document.createElement(\"img\"),this.retina.src=this.options.retina,this.retina.draggable=!1,this.container.appendChild(this.retina),this.img.draggable=!1,this.startListening(),assign(this.img.style,IMAGE_STYLES),assign(this.retina.style,RETINA_STYLES),assign(this.container.style,CONTAINER_STYLES),this.focus=this.options.focus?this.options.focus:{x:parseFloat(this.img.getAttribute(\"data-focus-x\"))||0,y:parseFloat(this.img.getAttribute(\"data-focus-y\"))||0},this.setFocus(this.focus)}return t.prototype.startListening=function(){this.container.addEventListener(\"mousedown\",this.startDragging),this.container.addEventListener(\"mousemove\",this.handleMove),this.container.addEventListener(\"mouseup\",this.stopDragging),this.container.addEventListener(\"mouseleave\",this.stopDragging),this.container.addEventListener(\"touchend\",this.stopDragging),this.container.addEventListener(\"touchstart\",this.startDragging,{passive:!0}),this.container.addEventListener(\"touchmove\",this.handleMove,{passive:!0}),this.img.addEventListener(\"load\",this.updateRetinaPositionFromFocus)},t.prototype.stopListening=function(){this.container.removeEventListener(\"mousedown\",this.startDragging),this.container.removeEventListener(\"mousemove\",this.handleMove),this.container.removeEventListener(\"mouseup\",this.stopDragging),this.container.removeEventListener(\"mouseleave\",this.stopDragging),this.container.removeEventListener(\"touchend\",this.stopDragging),this.container.removeEventListener(\"touchstart\",this.startDragging),this.container.removeEventListener(\"touchmove\",this.handleMove),this.img.removeEventListener(\"load\",this.updateRetinaPositionFromFocus)},t.prototype.setFocus=function(t){this.focus=t,this.img.setAttribute(\"data-focus-x\",t.x.toString()),this.img.setAttribute(\"data-focus-y\",t.y.toString()),this.updateRetinaPositionFromFocus(),this.options.onChange(t)},t.prototype.calculateOffsetFromFocus=function(){var t=this.img.getBoundingClientRect(),i=t.width,e=t.height;return{offsetX:i*(this.focus.x/2+.5),offsetY:e*(this.focus.y/-2+.5)}},t.prototype.updateCoordinates=function(t,i){if(this.isDragging){var e=this.img.getBoundingClientRect(),n=e.width,s=e.height,o=2*((t-e.left)/n-.5),a=-2*((i-e.top)/s-.5);this.setFocus({x:o,y:a})}},t}(),IMG_STYLES={minHeight:\"100%\",minWidth:\"100%\"},RESIZE_LISTENER_OBJECT_STYLES={height:\"100%\",width:\"100%\",border:\"none\",opacity:0,zIndex:-1,pointerEvents:\"none\"},DEFAULT_OPTIONS$1={debounceTime:17,updateOnWindowResize:!0,updateOnContainerResize:!1,containerPosition:\"relative\"},FocusedImage=function(){function t(t,i){void 0===i&&(i={});var e=this;this.imageNode=t,this.listening=!1,this.setFocus=function(t){e.focus=t,e.img.setAttribute(\"data-focus-x\",t.x.toString()),e.img.setAttribute(\"data-focus-y\",t.y.toString()),e.applyShift()},this.applyShift=function(){var t=e.img,i=t.naturalWidth,n=t.naturalHeight,s=e.container.getBoundingClientRect(),o=s.width,a=s.height,r=\"0\",h=\"0\";if(!(o>0&&a>0&&i>0&&n>0))return!1;var c=i/o,u=n/a;e.img.style.maxHeight=null,e.img.style.maxWidth=null,i>o&&n>a&&(e.img.style[c>u?\"maxHeight\":\"maxWidth\"]=\"100%\"),c>u?r=e.calcShift(u,o,i,e.focus.x)+\"%\":c<u&&(h=e.calcShift(c,a,n,e.focus.y,!0)+\"%\"),e.img.style.top=h,e.img.style.left=r},this.options=assign(DEFAULT_OPTIONS$1,i),this.img=t,this.container=t.parentElement,this.img.__focused_image_instance__&&(this.img.__focused_image_instance__.stopListening(),this.img.removeEventListener(\"load\",this.applyShift)),this.img.__focused_image_instance__=this,this.img.addEventListener(\"load\",this.applyShift),assign(this.container.style,CONTAINER_STYLES),this.container.style.position=this.options.containerPosition,assign(this.img.style,IMG_STYLES,ABSOLUTE_STYLES),this.debounceApplyShift=debounce(this.applyShift,this.options.debounceTime),this.focus=this.options.focus?this.options.focus:{x:parseFloat(this.img.getAttribute(\"data-focus-x\"))||0,y:parseFloat(this.img.getAttribute(\"data-focus-y\"))||0},this.startListening(),this.setFocus(this.focus)}return t.prototype.startListening=function(){var t=this;if(!this.listening&&(this.listening=!0,this.options.updateOnWindowResize&&window.addEventListener(\"resize\",this.debounceApplyShift),this.options.updateOnContainerResize)){var i=document.createElement(\"object\");assign(i.style,RESIZE_LISTENER_OBJECT_STYLES,ABSOLUTE_STYLES),i.addEventListener(\"load\",function(e){return i.contentDocument.defaultView.addEventListener(\"resize\",function(){return t.debounceApplyShift()})}),i.type=\"text/html\",i.setAttribute(\"aria-hidden\",\"true\"),i.tabIndex=-1,this.container.appendChild(i),i.data=\"about:blank\",this.resizeListenerObject=i}},t.prototype.stopListening=function(){this.listening&&(this.listening=!1,window.removeEventListener(\"resize\",this.debounceApplyShift),this.resizeListenerObject&&(this.resizeListenerObject.contentDocument.defaultView.removeEventListener(\"resize\",this.debounceApplyShift),this.container.removeChild(this.resizeListenerObject),this.resizeListenerObject=null))},t.prototype.calcShift=function(t,i,e,n,s){var o=Math.floor(i/2),a=(n+1)/2,r=Math.floor(e/t),h=Math.floor(a*r);s&&(h=r-h);var c=h-o,u=r-h,g=i-o;return u<g&&(c-=g-u),c<0&&(c=0),-100*c/i},t}();export{FocusPicker,FocusedImage};\n//# sourceMappingURL=image-focus.es5.js.map\n","import { FocusPicker } from \"image-focus\"\nimport \"./style.scss\"\n\ndocument\n  .querySelectorAll(\".js-focus-picker\")\n  .forEach(picker => {\n    let area = picker.querySelector(\"img\");\n\n    if (!area) {\n      return;\n    }\n\n    let x = picker.querySelectorAll('input[type=\"hidden\"]')[0];\n    let y = picker.querySelectorAll('input[type=\"hidden\"]')[1];\n\n    new FocusPicker(area, {\n      onChange: (focus) => {\n        x.value = focus.x;\n        y.value = focus.y;\n      },\n      focus: {\n        x: x.value,\n        y: y.value\n      }\n    })\n  })\n\n\n"],"sourceRoot":""}